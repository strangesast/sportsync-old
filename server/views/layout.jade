doctype html
html
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')

    if test
      link(href='/components/mocha/mocha.css', rel='stylesheet')

    meta(http-equiv='origin-trial', content='AhamtQGntIsEA27MiUelve8/Uee+UaRjFYvstwpEKVXnNTNOlr5oBA1hBxNkTdgyJkU0AAa/aG4u4l1wDGBp6QwAAABceyJvcmlnaW4iOiAiaHR0cHM6Ly9zcG9ydHN5bmNsaXZlLmNvbTo0NDMiLCAiZmVhdHVyZSI6ICJXZWJCbHVldG9vdGgiLCAiZXhwaXJ5IjogMTQ3NjEwODEwNn0=')
    meta(name='theme-color' content='#2a5a83')
    link(rel='manifest', href='/manifest.json')
    link(rel='icon', href='/images/icon.png')
    link(rel='shortcut icon', href='/images/icon64.png', type='image/x-icon')

    if static
      link(href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet')
      link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css')

    else
      link(rel='stylesheet', href='/components/open-sans/css/open-sans.css')
      link(rel='stylesheet', href='/components/font-awesome/css/font-awesome.css')

    //link(rel='stylesheet', href='/stylesheets/style.css')
    link(rel='stylesheet', href='/stylesheets/newstyle.css')

    block head

  body
    block content

    if static 
      script(src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js')
      script(src='https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js')
      script(src='https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js')
      script(src='https://cdnjs.cloudflare.com/ajax/libs/rivets/0.9.4/rivets.bundled.min.js')

    else
      // backbone stuff
      script(src='/components/jquery/dist/jquery.min.js')
      script(src='/components/underscore/underscore-min.js')
      script(src='/components/backbone/backbone-min.js')

      // rivets stuff
      script(src='/components/sightglass/index.js')
      script(src='/components/rivets/dist/rivets.min.js')

    block scripts

    if static
      script(src='/javascripts/index.js')
    else
      script(src='/javascripts/adapters.js')
      script(src='/javascripts/bluetooth.js')
      script(src='/javascripts/models.js')
      script(src='/javascripts/index.js')

    if test
      #mocha
      script(src='/components/expect.js/index.js')
      script(src='/components/mocha/mocha.js')
      
      script().
        mocha.setup('bdd')
      
      script(src='/javascripts/test.js')
      
      script().
        document.addEventListener('DOMContentLoaded', function(e) {
          mocha.checkLeaks();
          mocha.run();
        });
